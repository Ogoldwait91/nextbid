import 'package:flutter/material.dart';

class ProfileEditPage extends StatefulWidget {
  const ProfileEditPage({super.key});

  @override
  State<ProfileEditPage> createState() => _ProfileEditPageState();
}

class _ProfileEditPageState extends State<ProfileEditPage> {
  final _form = GlobalKey<FormState>();
  final _name = TextEditingController(text: 'Oliver "Oli" Goldwait');
  final _rank = TextEditingController(text: 'Senior First Officer');
  final _fleet = TextEditingController(text: 'B777');
  final _base = TextEditingController(text: 'LHR');
  final _seniority = TextEditingController(text: '231');
  final _staffNo = TextEditingController(text: 'BA123456');
  final _credit = TextEditingController(text: '54.7');
  final _leaveDays = TextEditingController(text: '18');
  final _avatarUrl = TextEditingController(text: '');

  @override
  void dispose() {
    _name.dispose();
    _rank.dispose();
    _fleet.dispose();
    _base.dispose();
    _seniority.dispose();
    _staffNo.dispose();
    _credit.dispose();
    _leaveDays.dispose();
    _avatarUrl.dispose();
    super.dispose();
  }

  void _save() {
    if (!_form.currentState!.validate()) return;
    ScaffoldMessenger.of(context).showSnackBar(
      const SnackBar(
          content: Text('Saved (placeholder) â€” wire persistence next')),
    );
    Navigator.pop(context);
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Edit profile')),
      body: Form(
        key: _form,
        child: ListView(
          padding: const EdgeInsets.all(16),
          children: [
            TextFormField(
                controller: _name,
                decoration: const InputDecoration(labelText: 'Name')),
            const SizedBox(height: 12),
            TextFormField(
                controller: _rank,
                decoration: const InputDecoration(labelText: 'Rank')),
            const SizedBox(height: 12),
            TextFormField(
                controller: _fleet,
                decoration: const InputDecoration(labelText: 'Fleet')),
            const SizedBox(height: 12),
            TextFormField(
                controller: _base,
                decoration: const InputDecoration(labelText: 'Base')),
            const SizedBox(height: 12),
            TextFormField(
              controller: _seniority,
              decoration: const InputDecoration(labelText: 'Seniority #'),
              keyboardType: TextInputType.number,
            ),
            const SizedBox(height: 12),
            TextFormField(
                controller: _staffNo,
                decoration: const InputDecoration(labelText: 'Staff No')),
            const SizedBox(height: 12),
            TextFormField(
              controller: _credit,
              decoration: const InputDecoration(labelText: 'Credit (h)'),
              keyboardType:
                  const TextInputType.numberWithOptions(decimal: true),
            ),
            const SizedBox(height: 12),
            TextFormField(
              controller: _leaveDays,
              decoration: const InputDecoration(labelText: 'Leave days'),
              keyboardType: TextInputType.number,
            ),
            const SizedBox(height: 12),
            TextFormField(
              controller: _avatarUrl,
              decoration:
                  const InputDecoration(labelText: 'Avatar URL (optional)'),
            ),
            const SizedBox(height: 20),
            SizedBox(
              width: double.infinity,
              child: FilledButton(onPressed: _save, child: const Text('Save')),
            ),
          ],
        ),
      ),
    );
  }
}
